# 実践！モブプログラミング

モブプログラミング（以下モブプロ）とは、3人以上の人たちが1台のコンピュータを使って、協力しながら問題を解決する手法です。分散知識の考えをプログラミングに活かしたものです。この方針を取り入れるための実践に関する方法をまとめます。

## なぜモブプログラミングをやるのか？

まずはモブプロのメリット・デメリットを理解して、どういったケースでは導入価値があるのかを提示します。

### メリット

- 属人化を防ぐことが出来る
  - 複数人でコード実装を行うため、全員がコードに理解を持てた状態で先に進める
- ゼネラリストの育成に効果あり
- 致命的なバグが減る
  - 実装が完了した段階で、全員でのコードレビューが終わってる状態となるため

### デメリット

- リソース効率が悪い
  - 全員が同じ程度のスキルかつ、作業分担が明確に出来るなら、個人で開発する方が良いかも
- 上手に運用しないと、誰かのワンマンプレイに陥ることがある
  - タイピストがコードを書いて、それをモブが眺めるだけになる
  - エキスパートしか指示しなくなる
- 割り込み対応に弱い
  - 1度抜けると、戻ったときのキャッチアップに時間を要する
  - 残ったメンバーの集中力が切れてしまう

### モブプロはどんなチーム・場面に向いてる？

- エンジニアのスキル差がある
- 致命的な不備・バグを減らしたい機能の実装
  - レビュー待ちを減らせるため、トータルの実装効率は悪くない

## 役割

モブプロでは、タイピストとその他モブに分かれて実装を進めて行きます

### タイピスト（ドライバー）

タイピストは、キーボードを打ってプログラムを書く人です。モブが何人いても、コードを書いてよいのは**1人**だけです。タイピストの役割は以下の内容になります。

- その他のモブの依頼内容を理解すること
- 要請の意味がはっきりしないときに、それをはっきりさせるための質問をする
- 依頼内容が理解できたら、コードの形に実装する
- その他のモブを信頼し、疑問に思っても指示内容をコードに書き起こす
  - 勝手にショートカットキーとか打たない！
  - タイピストをしている際は意見も禁止！
- ショートカットキーや他の人のツールの活用方法を指示通りに操作しながら学ぶ

#### 意見が湧いたら

タイピストをしている際に、こうしたら良いのに、といったことは多分に発生すると思います。その場合は以下の行動を取って下さい。

- コードの問題点や実装の不満点はメモをしておき、自分がモブに回った際に提案する
- タイピストの交代を提案して、モブに回る

### その他のモブ（ナビゲーター）

その他のモブは、タイピストに指示を出して、ロジックを組む役割です。以下がモブが実際に行うことです。

- 問題解決につながる次の論理的ステップを身につけるために力になること
- 他のモブの指示内容が理解できるまで質問する
- モブ全体の理解の水準を上げるために貢献すること
- 眼の前の問題に集中すること
- 他のメンバーの意見を聴くこと
- 便利なショートカットキーやツールを知っている場合は、それも指示すること

#### モブのアンチパターン

- まだコードで表現されていないことについて議論すること
  - 他の機能との兼ね合いが議論される場合、TODOの洗い出しが不足してるかも
  - 複数のアイデアがぶつかった場合、それらを書き出して1つずつコードで表現を行う

## 進め方

本実践では、以下のツールや問題を選び、実際にモビングを行っていきます。

### 実装環境

Visual Studio CodeのLive Shareの機能を利用して開発を行います

- [vs code](https://azure.microsoft.com/ja-jp/products/visual-studio-code/)
- [Live Share拡張機能のインストール方法](https://www.w2solution.co.jp/tech/2021/04/26/visualstudio%E3%81%A8vscode%E3%81%AEliveshare%E6%A9%9F%E8%83%BD%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86/)

### 取り組む問題

[Kata](https://codingdojo.org/kata/)から1問選び、まずは実装に必要な内容を列挙を共同で行っていきます。可能であれば、先に問題を決めておき、TODOまでは提示するのも1手です。

### 時間

時間は10分でタイピストを交代します。タイピストは自身のPC画面から入力を行って下さい。まずは2周回して、足りなければもう1周追加を検討します。

## 振り返り会

モブプロを行った際は、基本的に振り返り会を実施して、次回に活かしたい内容をピックアップします。振り返り会で行うステップと、時間は以下の表の形で進めて行きます。

| ステップ | 時間 |
| --- | --- |
| 事実と数字 | 2分 |
| 肯定的感想 | 3分 |
| 批判的感想 | 3分 |
| 建設的な問題解決法 | 5分 |
| 軌道修正すべきことの決定・合意形成 | 3分 |



### 事実と数字

実際に行った内容の事実を、共通認識として共有します。あくまで事実と具体的な数字のみを記載します

例

- タイピストを10分ごとに交代させた
- 〇〇さんは2回タイピストを努めた

だめな例（太字箇所にはいずれも評価が混じっている）

- 問題の**単純な**部分にふたつのインターバルを使った
- 私達は問題を**すばやく**解決した

上記だめな例を書き直すと

- 問題の計算の部分にふたつのインターバルを使った
- 私達は問題を2時間15分で解決した

### 肯定的感想

3分間で、モビングセッションに対する肯定的な評価を挙げていきます。どんな些細なことでもOK

上手く思い浮かばない場合は、以下の質問を行うor自問してみて下さい

- 1番上手く行ったことは何か？
- 予想外に簡単だったのは何か？
- セッションで良いと思ったことは何か？

### 批判的感想

3分間で、批判的な評価を挙げていきます。上手く行かなかったことや、どこに不満を感じたかを書いて行きます。注意点としては、**解決策**は書かず、あくまで批判のみを記載しましょう

### 建設的な問題解決法

5分間で、建設的な問題の解決方法を議論します。メンバー全員で批判的感想の欄に書かれた項目に注目してもらい、どうすれば改善出来るかを考えて行きます。この段階では、全てのアイデアを記載し、却下は行わないようにしましょう。

### 軌道修正すべきことの決定・合意形成

3分間で、建設的な問題解決法で出た改善案を**1つ**決め、それを次のセッションで取り入れます。複数採用しても機能しないので、必ず1つに絞りましょう。
全員が試しても良いと思った変更点が固まったら、それを書き出し、実際に適用していきます。

## 最後に

まずは導入のための説明を行いましたが、モブプロが向かない作業内容や、運用が上手く行われなくなる、所謂アンチパターンが存在します。そういった内容を別途まとめて、継続的なモブプロ導入が行えるような資料作成も検討中です。まずはやってみましょう

## 参考文献

- [モブプログラミング・ベストプラクティス](https://amzn.to/37e2Nhs)
- https://aloerina01.github.io/blog/2019-03-12-1
- https://qiita.com/erukiti/items/21e77457bff641e01fe1#%E3%81%AA%E3%81%9C%E3%83%A2%E3%83%96%E3%83%97%E3%83%AD
- [モブプロをやってる動画](https://www.youtube.com/watch?v=VQPSG0nLHn8)
  - 割とタイピストが意見を言っているためアンチパターン気味ではあるが、大まかな流れは理解しやすい